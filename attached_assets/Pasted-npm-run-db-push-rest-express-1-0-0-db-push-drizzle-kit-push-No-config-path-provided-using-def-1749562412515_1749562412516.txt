npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/drizzle.config.ts'
Using 'pg' driver for database querying
[✓] Pulling schema from database...
[✓] Changes applied
(base) anands-MacBook-Pro:AttachmentAnalyzer anandkumar$ npm run dev

> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Initialized 5 MCP connectors
6:58:22 PM [express] serving on port 5005
6:58:35 PM [express] GET /api/auth/profile 200 in 2ms :: {"id":1,"username":"admin","email":"admin@p…
6:58:36 PM [express] GET /api/admin/stats 200 in 2ms :: {"totalUsers":1247,"totalOrganizations":18,"…
6:58:36 PM [express] GET /api/admin/organizations 200 in 2ms :: [{"id":1,"name":"ACME Corporation","…
6:58:36 PM [express] GET /api/admin/users 200 in 85ms :: []
6:58:46 PM [express] GET /api/admin/stats 304 in 3ms :: {"totalUsers":1247,"totalOrganizations":18,"…
6:58:46 PM [express] GET /api/admin/organizations 304 in 1ms :: [{"id":1,"name":"ACME Corporation","…
6:58:47 PM [express] GET /api/roles 200 in 4ms :: [{"id":1,"name":"Super Admin","description":"Full …
6:58:47 PM [express] GET /api/client-api-keys 200 in 2ms :: [{"id":1,"name":"Production API Key","ke…
6:58:47 PM [express] GET /api/admin/activity-logs 404 in 16ms :: {"message":"API endpoint not found:…
6:58:47 PM [express] GET /api/admin/users 200 in 51ms :: []
6:58:51 PM [express] GET /api/admin/users 304 in 2ms :: []
6:58:54 PM [express] GET /api/email/templates 200 in 2ms :: [{"id":"welcome_template","name":"Welcom…
6:58:54 PM [express] GET /api/email/campaigns 200 in 3ms :: [{"id":"camp_001","name":"Welcome Series…
6:59:26 PM [express] GET /api/agents 200 in 39ms :: []
6:59:26 PM [express] GET /api/monitoring/stats 200 in 32ms :: {"totalAgents":"0","totalSessions":"0"…
6:59:30 PM [express] GET /api/agent-apps 200 in 3ms :: []
6:59:48 PM [express] GET /api/auth/profile 304 in 0ms :: {"id":1,"username":"admin","email":"admin@p…
6:59:52 PM [express] GET /api/mcp-connectors 401 in 39ms :: {"message":"Invalid or expired session"}
6:59:52 PM [express] GET /api/agents 304 in 36ms :: []
6:59:52 PM [express] GET /api/agent-apps 304 in 34ms :: []
(base) anands-MacBook-Pro:AttachmentAnalyzer anandkumar$ 
(base) anands-MacBook-Pro:AttachmentAnalyzer anandkumar$ npx tsx server/seed-roles.ts
Starting role seeding...
Error processing role Super Admin: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Error processing role Organization Admin: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Error processing role Client Admin: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Error processing role Standard User: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Error processing role Read Only: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Error processing role Developer: Error: No database host or connection string was set, and key parameters have default values (host: localhost, user: anandkumar, db: anandkumar, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.
    at An.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1579:62)
    at Cn.newClient (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1383:3)
    at Cn.connect (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1378:23)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1407:63)
    at Cn.query (file:///Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/@neondatabase/serverless/index.mjs:1623:14)
    at NeonPreparedQuery.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/neon-serverless/session.ts:102:31)
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1009:27)
    at Object.startActiveSpan (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/pg-core/query-builders/select.ts:1008:17)
    at PgSelectBase.then (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/node_modules/src/query-promise.ts:31:15)
Role seeding completed successfully
(base) anands-MacBook-Pro:AttachmentAnalyzer anandkumar$ npx tsx server/setup-demo-users.ts
/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/server/db.ts:7
  throw new Error(
        ^


Error: DATABASE_URL must be set. Did you forget to provision a database?
    at <anonymous> (/Users/anandkumar/Downloads/analyser/AttachmentAnalyzer/server/db.ts:7:9)
    at ModuleJob.run (node:internal/modules/esm/module_job:222:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:316:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:123:5)

Node.js v20.15.1